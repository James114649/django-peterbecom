<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>{% block title %}{% block title_prefix %}{{ page_title }}{% endblock %} - Peterbe.com{% endblock %}</title>

  <link
    href="//fonts.googleapis.com/css?family=Lato:400,700,400italic&amp;subset=latin"
    rel="stylesheet"
    type="text/css"
    data-mincss="ignore">

  {% stylesheet 'base' %}

  {# these are supposed to have the attribute data-mincss="no" #}
  {% stylesheet 'base_dynamic' %}

  <meta name="description" content="Stuff in Peter's head">
  <link rel="shortcut icon" href="{{ static("images/favicon-32.png") }}">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml">

  {% if use_google_analytics %}
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-94373-1', 'peterbe.com');
    ga('send', 'pageview');
  </script>
  {% endif %}

  {% if pingdom_rum_id %}
  <script>
  var _prum = [['id', '{{ pingdom_rum_id }}'],
               ['mark', 'firstbyte', (new Date()).getTime()]];
  (function() {
      var s = document.getElementsByTagName('script')[0]
        , p = document.createElement('script');
      p.async = 'async';
      p.src = '//rum-static.pingdom.net/prum.min.js';
      s.parentNode.insertBefore(p, s);
  })();
  </script>
  {% endif %}

  {% block extrahead %}
  {% endblock %}

</head>
<body>

  <div class="ui main text container">
    <h1 class="ui header">{% block page_title %}{{ page_title }}{% endblock %}</h1>
    {% block page_header_extra %}
    {% endblock %}
  </div>

  {# By putting this invisible element here, mincss will think this
     DOM element exists and that way it won't discard those CSS
     selectors. #}
  <div class="ui borderless main menu fixed" style="display:none"></div>

  {% if request.path != '/plog/blogitem-040601-1' %}
  <div class="ui borderless main menu">
    <div class="ui text container">

      <div href="#" class="header item">
        <a href="/"><img class="logo" src="{{ static('images/favicon-32.png') }}"></a>
        <a href="/">Peterbe.com</a>
        {% if page_title %}
        <a class="page-title-repeated">{{ page_title }}</a>
        {% endif %}
      </div>

      <div class="right menu">
        <a href="{{ url('plog_index') }}" class="ui item">Archive</a>
        <a href="{{ url('about') }}" class="ui item">About</a>
        <a href="{{ url('contact') }}" class="ui item">Contact</a>
        <form action="{{ url('search') }}" class="navbar-form navbar-right" role="search">
        <div class="item ui input">
        <input type="text" name="q"
          maxlength="90"
          placeholder="Search" {% if q %}value="{{ q }}"{% endif %}>
        </div>
        </form>

      </div>

      <div href="#" class="ui right floated dropdown item">
        Menu<i class="dropdown icon"></i>
        <div class="menu">
          <a class="item" href="{{ url('plog_index') }}">Archive</a>
          <a class="item" href="{{ url('about') }}">About</a>
          <a class="item" href="{{ url('contact') }}">Contact</a>
          <a class="item" href="{{ url('search') }}">Search</a>
        </div>
      </div>
    </div>
  </div>
  {% endif %}

  <div class="ui text container">
    {% block content %}
      {% block content_body %}
      {% endblock %}
    {% endblock %}
  </div>

  <div class="ui inverted vertical footer segment">
    <div class="ui center aligned container">
      <p>
        &copy; peterbe.com 2003 - {{ THIS_YEAR }}
        &sdot;
        Hosted on <a href="https://www.digitalocean.com/?refcode=9c9126b69f33"
        title="Yes, following this link and signing up will give me a small referal bonus :)"
        >Digital Ocean</a>
      </p>

      <div class="ui horizontal inverted small divided link list">
          <a class="item" href="/">Home</a>
          <a class="item" href="{{ url('plog_index') }}">Archive</a>
          <a class="item" href="{{ url('about') }}">About</a>
          <a class="item" href="{{ url('contact') }}">Contact</a>
          <a class="item" href="{{ url('search') }}">Search</a>
      </div>
      <p>
        Check out my latest side project
        <a href="https://songsear.ch" title="Find Songs by Lyrics">Song Search</a>
      </p>
    </div>
  </div>

  {% javascript 'base' %}

  {% block extrajs %}{% endblock %}
  {% if request.path != '/plog/blogitem-040601-1' %}
  <script>
  (function() {
    var i=0, urls = [
      '//cdn.jsdelivr.net/autocompeter/1/autocompeter.min.js',
      '{{ static('js/autocompeter.js') }}'
    ];
    var load = function() {
      if (i < urls.length) {
        var script = document.createElement('script');
        script.src = urls[i];
        script.onload = load;
        document.head.appendChild(script);
        i++;
      }
    };load();
  })();
  </script>
  {% endif %}

</body>

</html>
